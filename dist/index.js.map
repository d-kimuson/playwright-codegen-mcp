{
  "version": 3,
  "sources": ["../src/index.ts", "../package.json", "../src/server.ts", "../src/core/BrowserAdapter.ts", "../src/lib/logger.ts", "../src/lib/playwright/mode.ts", "../src/core/PlaywrightServer.ts", "../src/core/WebSocketClient.ts"],
  "sourcesContent": ["#!/usr/bin/env node\n\nimport { StdioServerTransport } from \"@modelcontextprotocol/sdk/server/stdio.js\";\nimport { program } from \"commander\";\nimport packageJson from \"../package.json\" with { type: \"json\" };\nimport { createServer } from \"./server\";\n\nconst main = async () => {\n  program\n    .name(`npx github:d-kimuson/${packageJson.name}`)\n    .version(packageJson.version)\n    .description(packageJson.description)\n    .addHelpText(\n      \"after\",\n      `\nFor detailed information about valid values and usage for each option, \nplease refer to the official Playwright documentation:\nhttps://playwright.dev/docs/api/class-browser#browser-new-context`,\n    )\n    .option(\"--base-url <url>\", \"The base URL to use for the browser.\")\n    .option(\"--locale <locale>\", \"The locale to use for the browser.\")\n    .option(\n      \"--default-storage-state <path>\",\n      \"The path to the default storage state file.\",\n    )\n    .option(\n      \"--default-user-agent <user-agent>\",\n      \"The user agent to use for the browser.\",\n    );\n\n  program.parse();\n\n  const options = program.opts<{\n    defaultStorageState?: string;\n  }>();\n\n  const { server } = await createServer({\n    defaultStorageState: options.defaultStorageState,\n  });\n\n  const transport = new StdioServerTransport();\n  await server.connect(transport);\n};\n\nawait main();\n", "{\n  \"name\": \"playwright-codegen-mcp\",\n  \"version\": \"0.0.0\",\n  \"description\": \"Model Context Protocol (MCP) server that provides Playwright browser automation tools for AI assistants\",\n  \"type\": \"module\",\n  \"bin\": {\n    \"playwright-codegen-mcp\": \"dist/index.js\"\n  },\n  \"scripts\": {\n    \"lint\": \"run-s 'lint:*'\",\n    \"lint:biome-format\": \"biome format .\",\n    \"lint:biome-lint\": \"biome check .\",\n    \"fix\": \"run-s 'fix:*'\",\n    \"fix:biome-format\": \"biome format --write .\",\n    \"fix:biome-lint\": \"biome check --write .\",\n    \"typecheck\": \"tsc --noEmit\",\n    \"build\": \"esbuild ./src/index.ts --bundle --platform=node --packages=external --format=esm --outdir=dist --sourcemap\"\n  },\n  \"packageManager\": \"pnpm@10.11.0\",\n  \"dependencies\": {\n    \"@modelcontextprotocol/sdk\": \"^1.17.3\",\n    \"commander\": \"^14.0.0\",\n    \"playwright-core\": \"^1.55.0\",\n    \"ulid\": \"^3.0.1\",\n    \"ws\": \"^8.18.3\",\n    \"yaml\": \"^2.8.1\",\n    \"zod\": \"^3.24.2\"\n  },\n  \"devDependencies\": {\n    \"@biomejs/biome\": \"^2.2.0\",\n    \"@tsconfig/strictest\": \"^2.0.5\",\n    \"@types/node\": \"^24.3.0\",\n    \"@types/ws\": \"^8.18.1\",\n    \"esbuild\": \"^0.25.9\",\n    \"npm-run-all2\": \"^8.0.4\",\n    \"playwright\": \"^1.55.0\",\n    \"tsx\": \"^4.20.4\",\n    \"typescript\": \"^5.9.2\"\n  }\n}\n", "import { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { stringify } from \"yaml\";\nimport z from \"zod\";\nimport packageJson from \"../package.json\" with { type: \"json\" };\nimport { BrowserAdapter } from \"./core/BrowserAdapter\";\n\nexport const createServer = async (options: {\n  baseURL?: string | undefined;\n  locale?: string | undefined;\n  defaultStorageState?: string | undefined;\n  defaultUserAgent?: string | undefined;\n}) => {\n  const server = new McpServer({\n    name: packageJson.name,\n    version: packageJson.version,\n  });\n\n  const browser = BrowserAdapter();\n\n  server.tool(\n    \"playwright_codegen_recording_start\",\n    \"Starts a browser for recording user interactions. The LLM should prompt the user to confirm the browser launch and perform the test case operations they want to generate, then report completion. Use playwright_codegen_recording_end after operations are complete to generate code from the recorded interactions.\",\n    {\n      url: z\n        .string()\n        .describe(\"The URL to navigate to when the browser is launched.\"),\n      storageState: z\n        .string()\n        .optional()\n        .describe(\n          `The path to the storage state file. If not provided, the browser will start with configured default storage state(path: ${options.defaultStorageState ?? \"not configured\"}).`,\n        ),\n      userAgent: z\n        .string()\n        .optional()\n        .describe(\n          `The user agent to use for the browser. If not provided, the browser will start with configured default user agent(value: ${options.defaultUserAgent ?? \"not configured\"}).`,\n        ),\n    },\n    async (params) => {\n      await browser.startRecording({\n        url: params.url,\n        storageState: params.storageState ?? options.defaultStorageState,\n        userAgent: params.userAgent ?? options.defaultUserAgent,\n        baseURL: options.baseURL,\n        locale: options.locale,\n      });\n\n      return {\n        content: [\n          {\n            type: \"text\",\n            text: \"Recording started successfully. Browser is now open and ready.\\n\\nNext action: Please inform the user that a browser window has opened and they should perform the test operations they want to generate code for. Once they have completed all the desired interactions, ask them to confirm completion so you can call playwright_codegen_recording_end to generate the test code.\",\n          },\n        ],\n      };\n    },\n  );\n\n  server.tool(\n    \"playwright_codegen_recording_end\",\n    \"Ends the recording session and closes the browser. Returns mechanically generated code based on the user interactions performed between start and end. The generated code is raw and may require manual adjustments to fit into your project's test structure and coding standards.\",\n    {},\n    async () => {\n      const result = await browser.endRecording();\n\n      return {\n        content: [\n          {\n            type: \"text\",\n            text: `${stringify({\n              fullCode: result.fullCode,\n              note: `Recording completed and browser closed.\\n\\nNote: The following code has been mechanically generated based on the user's interactions. It may require manual adjustments to fit your project's test structure, naming conventions, and coding standards before use.`,\n            })}`,\n          },\n        ],\n      };\n    },\n  );\n\n  return {\n    server,\n  };\n};\n", "import {\n  type Browser,\n  type BrowserContext,\n  type BrowserContextOptions,\n  type BrowserType,\n  chromium,\n} from \"playwright-core\";\nimport { z } from \"zod\";\nimport { logger } from \"../lib/logger\";\nimport { mode } from \"../lib/playwright/mode\";\nimport { startPlaywrightServer } from \"./PlaywrightServer\";\nimport { createWebSocketClient } from \"./WebSocketClient\";\n\nconst sourceChangedSchema = z.object({\n  text: z.string(),\n  header: z.string(),\n  footer: z.string(),\n  actions: z.array(z.string()),\n});\n\nexport const BrowserAdapter = (options: { browserType?: BrowserType } = {}) => {\n  const { browserType = chromium } = options;\n\n  const wsClient = createWebSocketClient();\n\n  const state: {\n    browser: Browser | undefined;\n    recordingCode: string | undefined;\n  } = {\n    browser: undefined,\n    recordingCode: undefined,\n  };\n\n  const browser = () => {\n    if (!state.browser) {\n      throw new Error(\"Currently no browser is connected\");\n    }\n\n    return state.browser;\n  };\n\n  const getOrCreateContext = async (contextOptions: BrowserContextOptions) => {\n    const context =\n      browser().contexts().at(0) ??\n      (await browser().newContext(contextOptions));\n    return context;\n  };\n\n  const getOrCreatePage = async (context: BrowserContext) => {\n    const page = context.pages().at(0) ?? (await context.newPage());\n    return page;\n  };\n\n  const startRecording = async (options: {\n    url: string;\n    // optional\n    storageState?: string;\n    userAgent?: string;\n    baseURL?: string;\n    locale?: string;\n  }) => {\n    const playwrightServer = await startPlaywrightServer();\n\n    wsClient.setOnMessage(\"sourceChanged\", (params) => {\n      const parsed = sourceChangedSchema.safeParse(params);\n      if (!parsed.success) {\n        logger.warn(\"parse failed sourceChanged\", params);\n        return;\n      }\n\n      state.recordingCode = parsed.data.text;\n    });\n\n    state.browser = await browserType.connect(playwrightServer.wsEndpoint);\n\n    const context = await getOrCreateContext({\n      storageState: options.storageState,\n      baseURL: options.baseURL,\n      locale: options.locale,\n      userAgent: options.userAgent,\n    });\n\n    const page = await getOrCreatePage(context);\n    await page.goto(options.url);\n\n    await wsClient.connect(`${playwrightServer.wsEndpoint}?debug-controller`);\n\n    await wsClient.send(\"initialize\", {\n      codegenId: \"playwright-test\",\n      sdkLanguage: \"javascript\",\n    });\n\n    await wsClient.send(\"setReportStateChanged\", { enabled: true });\n    await wsClient.send(\"setRecorderMode\", {\n      mode: mode(\"recording\"),\n    });\n  };\n\n  const endRecording = async () => {\n    const fullCode = state.recordingCode;\n\n    // clean up\n    await state.browser?.close();\n    state.browser = undefined;\n\n    state.recordingCode = undefined;\n\n    wsClient.send(\"kill\", {});\n\n    // return the full code\n    return {\n      fullCode,\n    } as const;\n  };\n\n  return {\n    originalBrowser: browser,\n    getOrCreateContext,\n    getOrCreatePage,\n    startRecording,\n    endRecording,\n  } as const;\n};\n", "type LogLevel = \"info\" | \"error\" | \"warn\";\n\ntype Logger = {\n  info: (message: string, data?: unknown) => void;\n  error: (message: string, data?: unknown) => void;\n  warn: (message: string, data?: unknown) => void;\n};\n\nconst logColor = (level: LogLevel) => {\n  switch (level) {\n    case \"info\":\n      return \"\\x1b[0m\"; /* black */\n    case \"error\":\n      return \"\\x1b[31m\"; /* red */\n    case \"warn\":\n      return \"\\x1b[33m\"; /* yellow */\n    default:\n      return \"\\x1b[0m\"; /* black */\n  }\n};\n\nconst printLog = (level: LogLevel, message: string, data: unknown) => {\n  process.stderr.write(\n    logColor(level) +\n      `[${level.toUpperCase()}] ${message}` +\n      (data ? `\\n${JSON.stringify(data, null, 2)}` : \"\") +\n      \"\\n\",\n  );\n};\n\nexport const serializeError = (error: unknown) => {\n  if (error instanceof Error) {\n    return {\n      name: error.name,\n      message: error.message,\n      stack: error.stack ?? null,\n      cause: error.cause ?? null,\n    };\n  }\n\n  return Object.assign({}, error);\n};\n\nexport const logger: Logger = {\n  info: (message, data) => {\n    printLog(\"info\", message, data);\n  },\n  error: (message, data) => {\n    printLog(\n      \"error\",\n      message,\n      data && data instanceof Error ? serializeError(data) : data,\n    );\n  },\n  warn: (message, data) => {\n    printLog(\"warn\", message, data);\n  },\n};\n", "/**\n * @ref https://github.com/microsoft/playwright/blob/e32f3ea1432a865cf43aef966a6475b4919b3880/packages/recorder/src/recorderTypes.d.ts#L22~L31\n */\nexport type Mode =\n  | \"inspecting\"\n  | \"recording\"\n  | \"none\"\n  | \"assertingText\"\n  | \"recording-inspecting\"\n  | \"standby\"\n  | \"assertingVisibility\"\n  | \"assertingValue\"\n  | \"assertingSnapshot\";\n\nexport const mode = <M extends Mode>(m: M): M => m;\n", "import { spawn } from \"node:child_process\";\nimport { randomBytes } from \"node:crypto\";\nimport { logger } from \"../lib/logger\";\n\nexport const startPlaywrightServer = async (): Promise<{\n  wsEndpoint: string;\n}> => {\n  logger.info(\"\uD83D\uDE80 Playwright run-server \u3092\u8D77\u52D5\u4E2D...\");\n\n  const guid = randomBytes(16).toString(\"hex\");\n  const args = [\"run-server\", `--path=/${guid}`];\n\n  const serverProcess = spawn(\"npx\", [\"playwright\", ...args], {\n    cwd: process.cwd(),\n    stdio: \"pipe\",\n    env: {\n      ...process.env,\n      PW_CODEGEN_NO_INSPECTOR: \"1\", // \u30A4\u30F3\u30B9\u30DA\u30AF\u30BF\u30FCUI\u7121\u52B9\n      PW_EXTENSION_MODE: \"1\", // \u62E1\u5F35\u30E2\u30FC\u30C9\u6709\u52B9\n    },\n  });\n\n  serverProcess.stderr?.on(\"data\", (data) => {\n    logger.error(`\uD83D\uDD34 Server Error: ${data.toString()}`);\n  });\n\n  return new Promise((resolve, reject) => {\n    let resolved = false;\n\n    serverProcess.stdout?.on(\"data\", (data) => {\n      const output = data.toString();\n\n      logger.info(\"\uD83D\uDCDD Server Output:\", output.trim());\n\n      const match = output.match(/Listening on (.*)/);\n\n      if (match && !resolved) {\n        resolved = true;\n        const wsEndpoint = match[1];\n        logger.info(`\u2705 Server\u8D77\u52D5\u5B8C\u4E86: ${wsEndpoint}`);\n        resolve({ wsEndpoint });\n      }\n    });\n\n    serverProcess.on(\"error\", (error) => {\n      if (!resolved) {\n        resolved = true;\n        reject(error);\n      }\n    });\n\n    serverProcess.on(\"exit\", (code) => {\n      if (!resolved) {\n        resolved = true;\n        reject(new Error(`Server exited with code ${code}`));\n      }\n    });\n\n    setTimeout(() => {\n      if (!resolved) {\n        resolved = true;\n        reject(new Error(\"Server startup timeout\"));\n      }\n    }, 30000);\n  });\n};\n", "import WebSocket from \"ws\";\nimport { logger } from \"../lib/logger\";\nimport type { ProtocolRequest, ProtocolResponse } from \"./types\";\n\nexport const createWebSocketClient = () => {\n  let wsCache: WebSocket | undefined;\n  let lastId = 0;\n  const callbacks = new Map<\n    number,\n    { fulfill: (a: unknown) => void; reject: (e: Error) => void }\n  >();\n  const messageHandlers: {\n    method: string;\n    callback: (params: Record<string, unknown>) => void | Promise<void>;\n  }[] = [];\n\n  const ws = () => {\n    if (wsCache) {\n      return wsCache;\n    }\n\n    throw new Error(\"WebSocket not connected\");\n  };\n\n  const send = (method: string, params: Record<string, unknown> = {}) => {\n    return new Promise((fulfill, reject) => {\n      const id = ++lastId;\n\n      const command: ProtocolRequest = {\n        id,\n        guid: \"DebugController\",\n        method,\n        params,\n        metadata: {},\n      };\n\n      logger.info(`\uD83D\uDCE4 \u9001\u4FE1: ${method}`, params);\n\n      ws().send(JSON.stringify(command));\n      callbacks.set(id, { fulfill, reject });\n    });\n  };\n\n  const setOnMessage = (\n    method: string,\n    callback: (params: Record<string, unknown>) => void | Promise<void>,\n  ) => {\n    messageHandlers.push({ method, callback });\n  };\n\n  const handleMessage = (message: ProtocolResponse) => {\n    logger.info(\"\uD83D\uDCE5 \u30E1\u30C3\u30BB\u30FC\u30B8\u53D7\u4FE1:\", JSON.stringify(message, null, 2));\n\n    if (message.id !== undefined) {\n      const callback = callbacks.get(message.id);\n\n      if (callback === undefined) {\n        logger.info(`\u26A0\uFE0F \u30B3\u30FC\u30EB\u30D0\u30C3\u30AF\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093 ID: ${message.id}`);\n        return;\n      }\n\n      callbacks.delete(message.id);\n      if (message.error) {\n        logger.error(`\u274C \u30B5\u30FC\u30D0\u30FC\u30A8\u30E9\u30FC: ${message.error}`);\n        const error = new Error(\n          message.error.message || JSON.stringify(message.error),\n        );\n        callback.reject(error);\n      } else {\n        logger.info(\"\u2705 \u30EC\u30B9\u30DD\u30F3\u30B9\u6210\u529F:\", message.result);\n        callback.fulfill(message.result);\n      }\n\n      return;\n    }\n\n    // \u30A4\u30D9\u30F3\u30C8\u901A\u77E5\n    logger.info(`\uD83D\uDCE1 \u30A4\u30D9\u30F3\u30C8\u53D7\u4FE1: ${message.method}`, message.params);\n\n    const handlers = messageHandlers.filter(\n      (handler) => handler.method === message.method,\n    );\n\n    for (const handler of handlers) {\n      handler.callback(message.params ?? {});\n    }\n  };\n\n  const connect = async (wsEndpoint: string) => {\n    wsCache = new WebSocket(wsEndpoint, [], {\n      perMessageDeflate: false,\n      maxPayload: 256 * 1024 * 1024, // 256MB\n      handshakeTimeout: 30000,\n    });\n\n    return new Promise<undefined>((resolve, reject) => {\n      ws().addEventListener(\"open\", () => {\n        logger.info(\"\u2705 WebSocket\u63A5\u7D9A\u6210\u529F\");\n        resolve(undefined);\n      });\n\n      ws().addEventListener(\"error\", (event) => {\n        logger.error(`\u274C WebSocket\u63A5\u7D9A\u30A8\u30E9\u30FC: ${event.message}`);\n        reject(new Error(`WebSocket error: ${event.message}`));\n      });\n\n      ws().addEventListener(\"message\", (event) => {\n        try {\n          const message: ProtocolResponse = JSON.parse(event.data.toString());\n          handleMessage(message);\n        } catch (e) {\n          logger.error(`\u274C \u30E1\u30C3\u30BB\u30FC\u30B8\u30D1\u30FC\u30B9\u30A8\u30E9\u30FC: ${e}`);\n          ws().close();\n        }\n      });\n\n      ws().addEventListener(\"close\", (event) => {\n        logger.info(\n          \"\uD83D\uDD0C WebSocket\u63A5\u7D9A\u304C\u9589\u3058\u3089\u308C\u307E\u3057\u305F\",\n          JSON.stringify(event, null, 2),\n        );\n      });\n    });\n  };\n\n  const close = () => {\n    ws().close();\n    wsCache = undefined;\n    lastId = 0;\n    callbacks.clear();\n  };\n\n  return {\n    send,\n    setOnMessage,\n    connect,\n    close,\n  } as const;\n};\n\nexport type WebSocketClient = ReturnType<typeof createWebSocketClient>;\n"],
  "mappings": "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",
  "names": ["z", "options", "z"]
}
